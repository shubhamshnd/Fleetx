<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}FleetX Dashboard{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { width: 100vw; height: 100vh; overflow: hidden; }

        .panel {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .panel-left { transform: translateX(-100%); }
        .panel-left.open { transform: translateX(0); }
        .panel-right { transform: translateX(100%); }
        .panel-right.open { transform: translateX(0); }
        .panel-bottom { transform: translateY(100%); }
        .panel-bottom.open { transform: translateY(0); }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #888; border-radius: 2px; }

        {% block extra_styles %}{% endblock %}
        /* Building label styling */
/* Remove default Leaflet tooltip box */
.leaflet-tooltip {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 !important;
}

/* Remove tooltip arrow */
.leaflet-tooltip::before {
    display: none !important;
}

/* Your label text styling */
.building-label-tooltip {
    color: #8f9daa;
    font-size: 10px;
    font-weight: 650;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    pointer-events: none;
    white-space: nowrap;
}

/* Marker container */
.building-label-marker {
    background: transparent !important;
    border: none !important;
}

.building-label-marker {
    transform: translate(-50%, -50%);
}

.building-label-tooltip {
    position: relative;
}

/* automatic spreading */
.building-label-tooltip:nth-child(1) { transform: translate(0, -14px); }
.building-label-tooltip:nth-child(2) { transform: translate(14px, 0); }
.building-label-tooltip:nth-child(3) { transform: translate(-14px, 0); }
.building-label-tooltip:nth-child(4) { transform: translate(0, 14px); }

    </style>
</head>
<body class="bg-white font-sans antialiased">
    <!-- Top Navigation Bar - Only visible when logged in -->
    {% if session.logged_in %}
    <nav class="fixed top-0 left-0 right-0 z-[1000] flex items-center justify-between px-4 py-3 bg-white/90 backdrop-blur-sm border-b border-gray-100">
        <div class="flex items-center gap-4">
            <h1 class="text-lg font-semibold text-gray-900 tracking-tight">JSW Jaigarh Port</h1>
            <div class="h-4 w-px bg-gray-200"></div>
            {% block nav_items %}{% endblock %}
            {% if session.role == 'admin' %}
            <a href="{{ url_for('admin_dashboard') }}" class="px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors">
                Admin
            </a>
            {% endif %}
        </div>
        <div class="flex items-center gap-6">
            {% block nav_status %}{% endblock %}
        </div>
    </nav>
    {% endif %}

    {% block content %}{% endblock %}

    {% block modals %}{% endblock %}

    {% block scripts %}{% endblock %}
</body>
</html>